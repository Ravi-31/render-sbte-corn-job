import{a as H,t as B}from"../chunks/disclose-version.BG6KKQKQ.js";import{i as Me}from"../chunks/legacy.Bq2vN1Ln.js";import{T as ve,V as ce,W as ye,F as oe,a6 as Ne,b as Re,ab as Ee,h as V,M as ne,J as ze,I as $e,a4 as Se,K as De,L as _e,N as se,c as W,ac as te,O as xe,a as Ae,P as Le,ad as Fe,ae as ue,af as de,ag as fe,ah as He,a3 as Oe,ai as je,d as qe,Y as Ve,a0 as Be,aj as Pe,a8 as Ye,A as pe,ak as Je,_ as Ke,al as we,p as Ue,g as O,f as We,t as j,e as Xe,i as N,j as S,am as he,o as T}from"../chunks/runtime.FqQbRKst.js";import{d as Ge,s as Qe,c as be,b as q,a as X}from"../chunks/store.FtrE5jM4.js";import{i as Ze,o as ea,a as aa}from"../chunks/index-client.CxreS0SW.js";import{d as ie,w as G}from"../chunks/index.DP4L1D8X.js";let me=!1;function ta(){me||(me=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const a of t.target.elements)(e=a.__on_r)==null||e.call(a)})},{capture:!0}))}function ra(t){var e=ye,a=oe;ve(null),ce(null);try{return t()}finally{ve(e),ce(a)}}function la(t,e,a,r=a){t.addEventListener(e,()=>ra(a));const l=t.__on_r;l?t.__on_r=()=>{l(),r(!0)}:t.__on_r=()=>r(!0),ta()}function Q(t,e){return e}function na(t,e,a,r){for(var l=[],v=e.length,f=0;f<v;f++)He(e[f].e,l,!0);var h=v>0&&l.length===0&&a!==null;if(h){var x=a.parentNode;Oe(x),x.append(a),r.clear(),D(t,e[0].prev,e[v-1].next)}je(l,()=>{for(var g=0;g<v;g++){var p=e[g];h||(r.delete(p.k),D(t,p.prev,p.next)),qe(p.e,!h)}})}function Z(t,e,a,r,l,v=null){var f=t,h={flags:e,items:new Map,first:null},x=(e&Ee)!==0;if(x){var g=t;f=V?ne(Ve(g)):g.appendChild(Ne())}V&&ze();var p=null,I=!1;Re(()=>{var n=a(),c=$e(n)?n:n==null?[]:Se(n),u=c.length;if(I&&u===0)return;I=u===0;let M=!1;if(V){var k=f.data===De;k!==(u===0)&&(f=_e(),ne(f),se(!1),M=!0)}if(V){for(var y=null,A,m=0;m<u;m++){if(W.nodeType===8&&W.data===Be){f=W,M=!0,se(!1);break}var s=c[m],i=r(s,m);A=Te(W,h,y,null,s,i,m,l,e),h.items.set(i,A),y=A}u>0&&ne(_e())}if(!V){var L=ye;sa(c,h,f,l,e,(L.f&te)!==0,r)}v!==null&&(u===0?p?xe(p):p=Ae(()=>v(f)):p!==null&&Le(p,()=>{p=null})),M&&se(!0),a()}),V&&(f=W)}function sa(t,e,a,r,l,v,f){var U,_,o,d;var h=(l&Pe)!==0,x=(l&(ue|fe))!==0,g=t.length,p=e.items,I=e.first,n=I,c,u=null,M,k=[],y=[],A,m,s,i;if(h)for(i=0;i<g;i+=1)A=t[i],m=f(A,i),s=p.get(m),s!==void 0&&((U=s.a)==null||U.measure(),(M??(M=new Set)).add(s));for(i=0;i<g;i+=1){if(A=t[i],m=f(A,i),s=p.get(m),s===void 0){var L=n?n.e.nodes_start:a;u=Te(L,e,u,u===null?e.first:u.next,A,m,i,r,l),p.set(m,u),k=[],y=[],n=u.next;continue}if(x&&ia(s,A,i,l),s.e.f&te&&(xe(s.e),h&&((_=s.a)==null||_.unfix(),(M??(M=new Set)).delete(s))),s!==n){if(c!==void 0&&c.has(s)){if(k.length<y.length){var P=y[0],E;u=P.prev;var Y=k[0],K=k[k.length-1];for(E=0;E<k.length;E+=1)ge(k[E],P,a);for(E=0;E<y.length;E+=1)c.delete(y[E]);D(e,Y.prev,K.next),D(e,u,Y),D(e,K,P),n=P,u=K,i-=1,k=[],y=[]}else c.delete(s),ge(s,n,a),D(e,s.prev,s.next),D(e,s,u===null?e.first:u.next),D(e,u,s),u=s;continue}for(k=[],y=[];n!==null&&n.k!==m;)(v||!(n.e.f&te))&&(c??(c=new Set)).add(n),y.push(n),n=n.next;if(n===null)continue;s=n}k.push(s),u=s,n=s.next}if(n!==null||c!==void 0){for(var z=c===void 0?[]:Se(c);n!==null;)(v||!(n.e.f&te))&&z.push(n),n=n.next;var F=z.length;if(F>0){var ae=l&Ee&&g===0?a:null;if(h){for(i=0;i<F;i+=1)(o=z[i].a)==null||o.measure();for(i=0;i<F;i+=1)(d=z[i].a)==null||d.fix()}na(e,z,ae,p)}}h&&Fe(()=>{var b;if(M!==void 0)for(s of M)(b=s.a)==null||b.apply()}),oe.first=e.first&&e.first.e,oe.last=u&&u.e}function ia(t,e,a,r){r&ue&&de(t.v,e),r&fe?de(t.i,a):t.i=a}function Te(t,e,a,r,l,v,f,h,x){var g=(x&ue)!==0,p=(x&Je)===0,I=g?p?Ye(l):pe(l):l,n=x&fe?pe(f):f,c={i:n,v:I,k:v,a:null,e:null,prev:a,next:r};try{return c.e=Ae(()=>h(t,I,n),V),c.e.prev=a&&a.e,c.e.next=r&&r.e,a===null?e.first=c:(a.next=c,a.e.next=c.e),r!==null&&(r.prev=c,r.e.prev=c.e),c}finally{}}function ge(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,l=e?e.e.nodes_start:a,v=t.e.nodes_start;v!==r;){var f=Ke(v);l.before(v),v=f}}function D(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Ie(t,e,a){if(t.multiple)return ua(t,e);for(var r of t.options){var l=ee(r);if(Ze(l,e)){r.selected=!0;return}}(!a||e!==void 0)&&(t.selectedIndex=-1)}function oa(t,e){we(()=>{var a=new MutationObserver(()=>{var r=t.__value;Ie(t,r)});return a.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function ke(t,e,a=e){var r=!0;la(t,"change",l=>{var v=l?"[selected]":":checked",f;if(t.multiple)f=[].map.call(t.querySelectorAll(v),ee);else{var h=t.querySelector(v)??t.querySelector("option:not([disabled])");f=h&&ee(h)}a(f)}),we(()=>{var l=e();if(Ie(t,l,r),r&&l===void 0){var v=t.querySelector(":checked");v!==null&&(l=ee(v),a(l))}t.__value=l,r=!1}),oa(t)}function ua(t,e){for(var a of t.options)a.selected=~e.indexOf(ee(a))}function ee(t){return"__value"in t?t.__value:t.value}var fa=B("<option> </option>"),va=B("<option> </option>"),ca=(t,e,a)=>e(a()),_a=B('<span class="svelte-zjblo"> </span>'),da=B('<th class="svelte-zjblo"><button class="svelte-zjblo"> <!></button></th>'),pa=B('<td class="svelte-zjblo"> </td>'),ha=B('<tr class="svelte-zjblo"></tr>'),ba=B('<h2>Student Records</h2> <select class="svelte-zjblo"><option>All Branches</option><!></select> <select class="svelte-zjblo"><option>All Colleges</option><!></select> <table class="svelte-zjblo"><thead><tr class="svelte-zjblo"></tr></thead><tbody></tbody></table>',1);function xa(t,e){Ue(e,!1);const a=Qe(),r=()=>q(I,"$branchFilter",a),l=()=>q(M,"$branches",a),v=()=>q(n,"$collegeFilter",a),f=()=>q(k,"$colleges",a),h=()=>q(c,"$sortKey",a),x=()=>q(u,"$sortDirection",a),g=()=>q(m,"$filteredAndSortedStudents",a);let p=G([]),I=G("all"),n=G("all"),c=G(""),u=G("ascending");ea(async()=>{const _=await fetch("/data.json");if(_.ok){const o=await _.json();p.set(o)}else console.error("Failed to fetch student data.")});let M=ie(p,_=>[...new Set(_.map(o=>o.branch))]),k=ie(p,_=>[...new Set(_.map(o=>o.college))]);const y=[{label:"Name",key:"name"},{label:"College",key:"college"},{label:"Roll Number",key:"roll"},{label:"Branch",key:"branch"},{label:"Marks",key:"marks"},{label:"Theory Marks",key:"theory"},{label:"Remarks",key:"remarks"}];function A(_){c.update(o=>{if(o===_)u.update(d=>d==="ascending"?"descending":"ascending");else return u.set("ascending"),_;return o})}let m=ie([p,I,n,c,u],([_,o,d,b,w])=>_.filter(C=>o==="all"||C.branch===o).filter(C=>d==="all"||C.college===d).sort((C,$)=>{if(!b)return 0;const R=C[b],J=$[b];return typeof R=="string"?w==="ascending"?R.localeCompare(J):J.localeCompare(R):w==="ascending"?R-J:J-R}));Me();var s=ba(),i=O(We(s),2);j(()=>{r(),he(()=>{l()})});var L=N(i);L.value=(L.__value="all")==null?"":"all";var P=O(L);Z(P,1,l,Q,(_,o)=>{var d=fa(),b={},w=N(d,!0);S(d),j(()=>{b!==(b=T(o))&&(d.value=(d.__value=T(o))==null?"":T(o)),X(w,T(o))}),H(_,d)}),S(i);var E=O(i,2);j(()=>{v(),he(()=>{f()})});var Y=N(E);Y.value=(Y.__value="all")==null?"":"all";var K=O(Y);Z(K,1,f,Q,(_,o)=>{var d=va(),b={},w=N(d,!0);S(d),j(()=>{b!==(b=T(o))&&(d.value=(d.__value=T(o))==null?"":T(o)),X(w,T(o))}),H(_,d)}),S(E);var z=O(E,2),F=N(z),ae=N(F);Z(ae,5,()=>y,Q,(_,o)=>{let d=()=>T(o).label,b=()=>T(o).key;var w=da(),C=N(w);C.__click=[ca,A,b];var $=N(C),R=O($);{var J=re=>{var le=_a(),Ce=N(le,!0);S(le),j(()=>X(Ce,x()==="ascending"?"↑":"↓")),H(re,le)};aa(R,re=>{h()===b()&&re(J)})}S(C),S(w),j(()=>X($,`${d()??""} `)),H(_,w)}),S(ae),S(F);var U=O(F);Z(U,5,g,Q,(_,o)=>{var d=ha();Z(d,5,()=>y,Q,(b,w)=>{let C=()=>T(w).key;var $=pa(),R=N($,!0);S($),j(()=>X(R,T(o)[C()])),H(b,$)}),S(d),H(_,d)}),S(U),S(z),ke(i,r,_=>be(I,_)),ke(E,v,_=>be(n,_)),H(t,s),Xe()}Ge(["click"]);export{xa as component};
